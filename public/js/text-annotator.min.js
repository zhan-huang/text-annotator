var TextAnnotator;(()=>{"use strict";var t={579:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var i=[],n=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"],r=function(t){return/^[A-Z][a-z].*/.test(t)||g(t)},s=function(t){return r(t)||/``|"|'/.test(t.substring(0,2))},a=function(t,e){return("a.m."===t||"p.m."===t)&&"day"===e.replace(/\W+/g,"").slice(-3).toLowerCase()},o=function(t){var e=t.replace(/[()[\]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0},h=function(t){return t.length<=3||r(t)},l=function(t,e){return e.length>0&&(!!(t<5&&e[0].length<6&&r(e[0]))||e.filter((function(t){return/[A-Z]/.test(t.charAt(0))})).length>=3)},g=function(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)},c=function(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)},u=function(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)},f=function(t){var e=0;return!(!((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)||!t.charAt(e+1).match(/[a-zA-Z].*/))&&[t.slice(0,e+1),t.slice(e+1)]},d=function(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e},p=function(t,e){return t.slice(t.length-e.length)===e};e.default=function(t,e){var r=" @~@ ",v=r.trim(),b=new RegExp("\\S",""),x=new RegExp("\\n+|[-#=_+*]{4,}","g"),m=new RegExp("\\S+|\\n","g");if(!t||"string"!=typeof t||!t.length)return[];if(!b.test(t))return[];var C,S,T,L={newline_boundaries:!1,html_boundaries:!1,html_boundaries_tags:["p","div","ul","ol"],sanitize:!1,allowed_tags:!1,preserve_whitespace:!1,abbreviations:null};if("boolean"==typeof e)L.newline_boundaries=!0;else for(var w in e)L[w]=e[w];if(C=L.abbreviations,i=C||n,L.newline_boundaries&&(t=t.replace(x,r)),L.html_boundaries){var M="(<br\\s*\\/?>|<\\/("+L.html_boundaries_tags.join("|")+")>)",O=new RegExp(M,"g");t=t.replace(O,"$1 @~@ ")}(L.sanitize||L.allowed_tags)&&(L.allowed_tags||(L.allowed_tags=[""]),t=function(t){if(("string"==typeof t||t instanceof String)&&"undefined"!=typeof document){var e=document.createElement("DIV");e.innerHTML=t,t=(e.textContent||"").trim()}else"object"==typeof t&&t.textContent&&(t=(t.textContent||"").trim());return t}(t,L.allowed_tags));var y=0,_=0,H=[],j=[],A=[];if(!(S=L.preserve_whitespace?(T=t.split(/(<br\s*\/?>|\S+|\n+)/)).filter((function(t,e){return e%2})):t.trim().match(m))||!S.length)return[];for(var z,R,k=0,W=0,E=S.length;W<E;W++)if(y++,A.push(S[W]),~S[W].indexOf(",")&&(y=0),"."===(R=S[W])||"!"===R||"?"===R||d(S[W],"?!")||S[W]===v)(L.newline_boundaries||L.html_boundaries)&&S[W]===v&&A.pop(),j.push(A),y=0,A=[];else if((d(S[W],'"')||d(S[W],"”"))&&(S[W]=S[W].slice(0,-1),_=2*W+1),d(S[W],".")){if(W+1<E){if(2===S[W].length&&isNaN(S[W].charAt(0)))continue;if(z=S[W],~i.indexOf(z.replace(/\W+/g,"")))continue;if(s(S[W+1])){if(a(S[W],S[W+1]))continue;if(l(y,S.slice(W,6)))continue;if(g(S[W+1])&&h(S[W]))continue}else{if(p(S[W],".."))continue;if(o(S[W]))continue;if(l(y,S.slice(W,5)))continue}}j.push(A),A=[],y=0}else{if((_=S[W].indexOf("."))>-1){if(g(S[W],_))continue;if(o(S[W]))continue;if(u(S[W])||c(S[W]))continue}var I=f(S[W]);I&&(H=I,A.pop(),A.push(H[0]),j.push(A),L.preserve_whitespace&&(T.splice(2*W+1+k,1,H[0],"",H[1]),k+=2),y=0,(A=[]).push(H[1]))}A.length&&j.push(A);var q=[],B="";j=j.filter((function(t){return t.length>0}));for(var D=0;D<j.length;D++){if(!L.preserve_whitespace||L.newline_boundaries||L.html_boundaries)B=j[D].join(" ");else{var N=2*j[D].length;0===D&&(N+=1),B=T.splice(0,N).join("")}1===j[D].length&&j[D][0].length<4&&j[D][0].indexOf(".")>-1&&j[D+1]&&j[D+1][0].indexOf(".")<0&&(B+=" "+j[D+1].join(" "),D++),q.push(B)}return q}},880:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=i(996);t.exports=n.default},996:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=i(579),r=function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},s=["address","article","aside","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tfoot","ul","video"],a=function(){function t(t){void 0===t&&(t={content:""}),this.content="",this.isHTML=!0,this.originalContent="",this.annotatedContent="",this.stripedHTML="",this.tagLocations=[],this.sentences=[],this.highlights=[];var e=t.content,i=void 0===t.isHTML||t.isHTML;this.originalContent=this.annotatedContent=e,this.isHTML=i,i&&this.stripAndStoreHTMLTags()}return t.prototype.search=function(e,i){void 0===i&&(i={});var n=i.prefix||"",r=i.postfix||"",s=i.directSearchOptions||{},a=i.fuzzySearchOptions,o=i.eagerSearchOptions,h=void 0===i.trim||i.trim,l=i.caseSensitive;if(h){var g=t.trim(n,e,r);n=g.prefix,e=g.str,r=g.postfix}var c=-1;return-1!==(c=this.directSearch(n,e,r,Object.assign({caseSensitive:l},s)))||a&&-1!==(c=this.fuzzySearch(n,e,r,Object.assign({caseSensitive:l},a)))||o&&(c=this.eagerSearch(n,e,r,Object.assign({caseSensitive:l},o))),c},t.prototype.searchAll=function(t,e){var i=this;void 0===e&&(e={});var n=[],r=function(t,e){var s=i.search(t,e);-1!==s&&(n.push(s),e.directSearchOptions=e.directSearchOptions||{},e.directSearchOptions.lastHighlightIndex=s,r(t,e))};return r(t,e),n},t.prototype.highlight=function(e,i){void 0===i&&(i={});var n=i.highlightTagName||"span",r=i.highlightClass||"highlight",s=i.highlightIdPattern||"highlight-",a=t.createOpenTag(n,s,e,r),o=this.adjustLoc(n,s,e,r);return this.annotatedContent=t.insert(this.annotatedContent,a,o[0]),this.annotatedContent=t.insert(this.annotatedContent,t.createCloseTag(n),o[1]+a.length),this.highlights[e].highlighted=!0,this.annotatedContent},t.prototype.highlightAll=function(t,e){void 0===e&&(e={});for(var i=0;i<t.length;i++)this.annotatedContent=this.highlight(t[i],e);return this.annotatedContent},t.prototype.searchAndHighlight=function(t,e){void 0===e&&(e={});var i=this.search(t,e.searchOptions);if(-1!==i)return{highlightIndex:i,content:this.highlight(i,e.highlightOptions)}},t.prototype.unhighlight=function(e,i){void 0===i&&(i={});var n=i.highlightTagName||"span",r=i.highlightClass||"highlight",s=i.highlightIdPattern||"highlight-";this.highlights[e].highlighted=!1;var a=this.adjustLoc(n,s,e,r),o=t.getOpenTagLength(n,s,e,r),h=this.annotatedContent.substring(a[0],a[1]+o+t.getCloseTagLength(n)),l=this.annotatedContent.substring(a[0]+o,a[1]+o);return this.annotatedContent=this.annotatedContent.replace(h,l),this.annotatedContent},t.prototype.stripAndStoreHTMLTags=function(){var t;this.stripedHTML=this.originalContent;for(var e=/<[^>]+>/,i=0;t=this.stripedHTML.match(e);){this.stripedHTML=this.stripedHTML.replace(t[0],"");var n=t[0].length;this.tagLocations.push([t.index,n,i]),i+=n}},t.prototype.directSearch=function(t,e,i,n){void 0===n&&(n={});var s=n.caseSensitive,a=n.encode,o=n.lastHighlightIndex,h=t+e+i,l=this.isHTML?this.stripedHTML:this.originalContent;s||(h=h.toLowerCase(),l=l.toLowerCase());var g=0;void 0!==o&&(g=this.highlights[o].loc[1]+1);var c=-1,u=l.indexOf(h,g);if(a&&-1===u){var f=r(h),d=l.indexOf(f,g);-1!==d&&((p=[0,0])[0]=d+r(t).length,p[1]=p[0]+r(e).length,c=this.highlights.push({loc:p})-1)}else if(-1!==u){var p;(p=[0,0])[0]=u+t.length,p[1]=p[0]+e.length,c=this.highlights.push({loc:p})-1}return c},t.prototype.eagerSearch=function(e,i,n,r){void 0===r&&(r={containerId:""});var s=r.caseSensitive,a=r.containerId,o=r.threshold||.74,h=e+i+n,l=-1;if(window.find){document.designMode="on";var g=window.getSelection();for(g.collapse(document.body,0);window.find(h,s);){document.execCommand("hiliteColor",!0,"rgba(255, 255, 255, 0)"),g.collapseToEnd();var c=document.querySelector("#"+a+' [style="background-color: rgba(255, 255, 255, 0);"]');if(c){var u=c.innerHTML.replace(/<[^>]*>/g,""),f=t.getBestSubstring(u,i,o);if(f){var d=(this.isHTML?this.stripedHTML:this.originalContent).indexOf(u);-1!==d&&(l=this.highlights.push({loc:[d+f.loc[0],d+f.loc[1]]})-1)}break}}document.execCommand("undo"),document.designMode="off"}return l},t.prototype.fuzzySearch=function(e,i,n,r){var s=r.caseSensitive,a=r.tokenBased,o=r.tbThreshold||.68,h=void 0===r.sentenceBased||r.sentenceBased,l=r.sbThreshold||.85,g=r.maxLengthDiff||.1,c=r.lenRatio||2,u=r.processSentence,f=-1,d=this.isHTML?this.stripedHTML:this.originalContent;if(a||e||n){for(var p=[],v=-1;-1!==(v=d.indexOf(i,v+1));)p.push(v);for(var b=-1,x=e+i+n,m=0;m<p.length;m++){var C=p[m],S=d.substring(C-e.length,C)+i+d.substring(C+i.length,C+i.length+n.length);(I=t.getSimilarity(S,x,s))>=o&&(o=I,b=C)}-1!==b&&(f=this.highlights.push({loc:[b,b+i.length]})-1)}else if(h){var T=[];T=this.sentences.length?this.sentences:this.sentences=t.sentenize(d);var L=i.split(/\s/),w=[];for(v=0;v<T.length;v++)for(var M=0;M<L.length;M++)if(T[v].raw.includes(L[M])){w.push(T[v]);break}if(u){var O=0;for(v=0;v<w.length;v++){var y=w[v],_=y.raw,H=[y.index,y.index+_.length],j=0,A=this.tagLocations;for(M=O;M<A.length;M++){var z=A[M];if(z[0]>=H[0]&&z[0]<=H[1]){var R=this.originalContent.substring(z[0]+z[2],z[0]+z[2]+z[1]),k=z[0]+j-H[0];_=_.slice(0,k)+R+_.slice(k),j+=z[1]}else if(z[0]>H[1]){O=M;break}}_=(_=u(_)).replace(/(<([^>]+)>)/gi,"");var W=y.raw;W!==_&&(y.raw=_,y.index=y.index+W.indexOf(_))}}var E=null;for(v=0;v<w.length;v++){var I,q=w[v];if((I=t.getSimilarity(q.raw,i,s))>=l)l=I,E=q;else if(v!==w.length-1){var B=q.raw+w[v+1].raw;if(Math.abs(B.length-i.length)/i.length<=g){var D=t.getSimilarity(B,i,s);D>=l&&(l=D,E={raw:B,index:q.index})}}}if(E){var N=t.getBestSubstring(E.raw,i,l,c,s,!0);N&&(O=E.index,f=this.highlights.push({loc:[O+N.loc[0],O+N.loc[1]]})-1)}}return f},t.prototype.includeRequiredTag=function(t,e,i){var n=i.startsWith("</"),r=n?i.split("</")[1].split(">")[0]:i.split(" ")[0].split("<")[1].split(">")[0],s=!1,a=1,o=0;if(n)for(var h=t-1;h>=0;h--){var l=this.tagLocations[h];if(e[0]>l[0])break;if((g=this.originalContent.substring(l[0]+l[2],l[0]+l[2]+l[1])).startsWith("</"+r)?a++:g.startsWith("<"+r)&&o++,a===o){s=!0;break}}else for(h=t+1;h<this.tagLocations.length;h++){var g;if(l=this.tagLocations[h],e[1]<l[0])break;if((g=this.originalContent.substring(l[0]+l[2],l[0]+l[2]+l[1])).startsWith("<"+r)?a++:g.startsWith("</"+r)&&o++,a===o){s=!0;break}}return s},t.prototype.adjustLoc=function(e,i,n,r){void 0===e&&(e="span");for(var a=this.highlights[n].loc,o=[0,0],h=this.tagLocations.length,l=0;l<h;l++){var g=this.tagLocations[l];if(a[1]<g[0])break;if(a[1]===g[0])!(c=this.originalContent.substring(g[0]+g[2],g[0]+g[2]+g[1])).endsWith("/>")&&c.startsWith("</")&&!s.includes(c.split("</")[1].split(">")[0])&&this.includeRequiredTag(l,a,c)&&(o[1]+=g[1]);else if(a[1]>g[0]){var c;o[1]+=g[1],a[0]===g[0]?((c=this.originalContent.substring(g[0]+g[2],g[0]+g[2]+g[1])).startsWith("</")||c.endsWith("/>")||s.includes(c.split(" ")[0].split("<")[1].split(">")[0])||!this.includeRequiredTag(l,a,c))&&(o[0]+=g[1]):a[0]>g[0]&&(o[0]+=g[1])}}for(l=0;l<this.highlights.length;l++){var u=this.highlights[l];if(u.highlighted){var f=t.getOpenTagLength(e,i,l,r),d=t.getCloseTagLength(e),p=u.loc;a[0]>=p[1]?(o[0]+=f+d,o[1]+=f+d):a[0]<p[1]&&a[0]>p[0]&&a[1]>p[1]?(o[0]+=f,o[1]+=f+d):a[0]<=p[0]&&a[1]>=p[1]?o[1]+=f+d:a[0]<p[0]&&a[1]>p[0]&&a[1]<p[1]?o[1]+=f:a[0]>=p[0]&&a[1]<=p[1]&&(o[0]+=f,o[1]+=f)}}return[a[0]+o[0],a[1]+o[1]]},t.createOpenTag=function(t,e,i,n){return void 0===t&&(t="span"),"<".concat(t,' id="').concat(e+i,'" class="').concat(n,'">')},t.createCloseTag=function(t){return void 0===t&&(t="span"),"</".concat(t,">")},t.getOpenTagLength=function(e,i,n,r){return void 0===e&&(e="span"),t.createOpenTag(e,i,n,r).length},t.getCloseTagLength=function(e){return void 0===e&&(e="span"),t.createCloseTag(e).length},t.trim=function(t,e,i){return t=t.replace(/^\s+/,""),i=i.replace(/\s+$/,""),t||(e=e.replace(/^\s+/,"")),i||(e=e.replace(/\s+$/,"")),{prefix:t,str:e,postfix:i}},t.insert=function(t,e,i){return t.slice(0,i)+e+t.slice(i)},t.sentenize=function(t){return(0,n.default)(t,{newline_boundaries:!1,html_boundaries:!1,sanitize:!1,allowed_tags:!1,preserve_whitespace:!0}).map((function(e){return{raw:e,index:t.indexOf(e)}}))},t.getBestSubstring=function(e,i,n,r,s,a){var o=null,h=a?n:t.getSimilarity(e,i,s);if(h>=n){for(var l=e.split(" ");l.length;){var g=l.shift(),c=l.join(" "),u=t.getSimilarity(c,i,s);if(u<h){l.unshift(g);var f=l.pop();if((u=t.getSimilarity(l.join(" "),i,s))<h){l.push(f);break}h=u}else h=u}var d=l.join(" ");if(!r||d.length/i.length<=r){var p=[0,0];p[0]=e.indexOf(d),p[1]=p[0]+d.length,o={similarity:h,loc:p}}}return o},t.getSimilarity=function(e,i,n){return n||(e=e.toLowerCase(),i=i.toLowerCase()),e===i?1:t.lcsLength(e,i)/i.length},t.lcsLength=function(t,e,i){var n=i?t:t.toLowerCase(),r=i?e:e.toLowerCase();if(n===r)return n.length;if(""===(n||r))return"".length;var s,a,o=n.length,h=r.length,l=function(t){for(var e=[],i=0;i<t;i++)e[i]=[];return e}(h+1);for(s=0;s<=o;s++)l[0][s]=0;for(s=0;s<=h;s++)l[s][0]=0;for(s=1;s<=h;s++)for(a=1;a<=o;a++)n[a-1]===r[s-1]?l[s][a]=l[s-1][a-1]+1:l[s][a]=Math.max(l[s-1][a],l[s][a-1]);var g="";for(s=h,a=o;s>0&&a>0;)n[a-1]===r[s-1]?(g=n[a-1]+g,s--,a--):Math.max(l[s-1][a],l[s][a-1])===l[s-1][a]?s--:a--;return g.length},t}();e.default=a}},e={},i=function i(n){var r=e[n];if(void 0!==r)return r.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,i),s.exports}(880);TextAnnotator=i})();